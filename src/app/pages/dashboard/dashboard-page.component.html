<div class="dashboard">

  <!-- TOPO: saudaÃ§Ã£o + botÃµes -->
  <header class="dash-header">
    <div class="dash-welcome">
      <h1>Bem-vindo!</h1>
      <p>Gerencie seus links e coleÃ§Ãµes de forma inteligente.</p>
    </div>

    <div class="dash-actions">
      <button class="pill-button secondary" routerLink="/links">
        <span>+ Novo Link</span>
      </button>
      <!-- BotÃ£o de encurtar nÃ£o existe como funcionalidade separada, entÃ£o sÃ³ um CTA genÃ©rico -->
      <button class="pill-button ghost" routerLink="/links">
        <span>Ver Meus Links</span>
      </button>
    </div>
  </header>

  <!-- MÃ‰TRICAS -->
  <section class="dash-metrics">
    <div class="metric-card">
      <div class="metric-label">Total Links</div>
      <div class="metric-value">
        {{ metrics?.linksTotal || 0 }}
      </div>
      <div class="metric-icon">
        <span>ğŸ”—</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-label">Total ColeÃ§Ãµes</div>
      <div class="metric-value">
        {{ metrics?.collectionsTotal || 0 }}
      </div>
      <div class="metric-icon">
        <span>ğŸ“¦</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-label">Compartilhamentos</div>
      <div class="metric-value">
        {{ metrics?.totalShares || 0 }}
      </div>
      <div class="metric-icon">
        <span>ğŸ“¤</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-label">VisualizaÃ§Ãµes</div>
      <div class="metric-value">
        {{ metrics?.totalViews || 0 }}
      </div>
      <div class="metric-icon">
        <span>ğŸ‘ï¸</span>
      </div>
    </div>
  </section>

  <div *ngIf="loading" class="dash-loading">
    Carregando dados...
  </div>

  <!-- GRID PRINCIPAL: Links recentes + Minhas coleÃ§Ãµes -->
  <section class="dash-main" *ngIf="!loading">
    <!-- LINKS RECENTES -->
    <div class="panel panel-links">
      <div class="panel-header">
        <div class="panel-title">
          <span class="panel-icon">ğŸ“</span>
          <span>Links recentes:</span>
        </div>
        <a routerLink="/links" class="panel-link">Ver todos os links</a>
      </div>

      <div *ngIf="recentLinks?.length; else noLinks">
        <div class="link-card" *ngFor="let link of recentLinks">
          <div class="link-main">
            <div class="link-title">{{ link.title || 'Sem tÃ­tulo' }}</div>
            <div class="link-url">
              {{ link.short_url || link.url }}
            </div>

            <div class="link-tags" *ngIf="link.tags?.length">
              <span class="tag" *ngFor="let tag of link.tags">
                {{ tag }}
              </span>
            </div>
          </div>

          <div class="link-actions">
            <!-- Apenas visuais, sem funcionalidade obrigatÃ³ria -->
            <button type="button" title="Abrir link">
              <span>ğŸ”—</span>
            </button>
            <button type="button" title="Copiar">
              <span>ğŸ“‹</span>
            </button>
            <button type="button" title="Compartilhar">
              <span>ğŸ“¤</span>
            </button>
          </div>
        </div>
      </div>

      <ng-template #noLinks>
        <p class="empty-text">
          Nenhum link cadastrado ainda. Crie seu primeiro link em â€œMeus Linksâ€.
        </p>
      </ng-template>
    </div>

    <!-- MINHAS COLEÃ‡Ã•ES -->
    <div class="panel panel-collections">
      <div class="panel-header">
        <div class="panel-title">
          <span class="panel-icon">ğŸ“</span>
          <span>Minhas ColeÃ§Ãµes:</span>
        </div>
        <a routerLink="/colecoes" class="panel-link">Ver todas</a>
      </div>

      <div class="collections-grid" *ngIf="recentCollections?.length; else noCollections">
        <div class="collection-card" *ngFor="let c of recentCollections">
          <div class="collection-icon">
            <!-- sÃ³ um cÃ­rculo colorido, sem Ã­cone dinÃ¢mico -->
            <span>{{ c.name?.charAt(0) || 'C' }}</span>
          </div>

          <div class="collection-main">
            <div class="collection-name">
              {{ c.name }}
            </div>
            <div class="collection-description">
              {{ c.description || 'DescriÃ§Ã£o nÃ£o informada' }}
            </div>

            <div class="collection-meta">
              <!-- placeholder simples, sem contagem real -->
              <span class="meta-item">
                ğŸ‘ï¸ 0
              </span>
              <span class="meta-item">
                ğŸ‘¥ {{ c.visibility || 'publico' }}
              </span>
            </div>
          </div>
        </div>

        <!-- Card â€œCriar nova coleÃ§Ã£oâ€ visual -->
        <div class="collection-card create-card" routerLink="/colecoes">
          <div class="create-icon">ï¼‹</div>
          <div class="create-text">
            <div>Criar Nova ColeÃ§Ã£o</div>
            <small>Organize seus links em categorias.</small>
          </div>
        </div>
      </div>

      <ng-template #noCollections>
        <p class="empty-text">
          Nenhuma coleÃ§Ã£o criada ainda. Comece clicando em â€œColeÃ§Ãµesâ€ no menu lateral.
        </p>
      </ng-template>
    </div>
  </section>
</div>
